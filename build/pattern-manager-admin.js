(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.element,n=window.wp.i18n,r=window.wp.blockEditor,s=window.wp.apiFetch;var a=e.n(s);const i=class{name="";title="";description="";content="";categories=[];keywords=[];source="";synced=!1;inserter=!1;constructor(e){this.title=e.title||"",this.name=e.name,this.description=e.description||"",this.content=e.content||"",this.source=e.source||"",this.synced=e.synced||!1,this.inserter=e.inserter||!1}};async function o(){return a()({path:"/pattern-manager/v1/global-styles"}).then((e=>e)).catch((e=>{console.error("Error fetching global styles:",e)}))}const c=window.wp.blocks,l=window.wp.components,d=window.ReactJSXRuntime,p=({pattern:e,onClick:t})=>{const{title:n,content:s}=e,a=(0,c.parse)(s);return(0,d.jsxs)(l.Composite,{onClick:()=>{t&&t(e)},children:[(0,d.jsx)("p",{children:n}),(0,d.jsx)(r.BlockPreview,{blocks:a,viewportWidth:500})]})},h=({onPatternClick:e})=>{const[s,c]=(0,t.useState)([]),[l,h]=(0,t.useState)({}),[m,x]=(0,t.useState)(!0),[j,w]=(0,t.useState)(null);return(0,t.useEffect)((()=>{(async function(){return a()({path:"/pattern-manager/v1/patterns",method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.map((e=>new i(e)))))})().then((e=>{c(e),x(!1)})).catch((e=>{w(e.message||"Something went wrong."),x(!1)})),o().then((e=>{h(e)}))}),[]),(0,d.jsx)(r.BlockEditorProvider,{settings:{...l,isPreviewMode:!0,focusMode:!1},children:(0,d.jsxs)("div",{className:"pattern-manager_preview-grid",children:[m&&(0,d.jsx)("p",{children:(0,n.__)("Loading patterns...","pattern-manager")}),j&&(0,d.jsx)("p",{style:{color:"red"},children:j}),s.map(((t,n)=>(0,d.jsx)("div",{className:"pattern-manager_preview-grid-item",children:(0,d.jsx)(p,{onClick:e,pattern:t})},n)))]})})},m=window.wp.editor,x=window.wp.primitives,j=(0,d.jsx)(x.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,d.jsx)(x.Path,{d:"M14.6 7l-1.2-1L8 12l5.4 6 1.2-1-4.6-5z"})}),w=({pattern:e})=>(0,d.jsxs)("div",{className:"pattern-manager_pattern-details",children:[(0,d.jsx)("h2",{children:e?.title}),(0,d.jsx)("p",{children:e?.name}),(0,d.jsx)("p",{children:e?.description}),(0,d.jsx)("p",{children:e?.synced?"SYNCED":"UNSYNCED"}),(0,d.jsx)("p",{children:e?.source})]}),u=({pattern:e,onClose:n})=>{const[s,p]=(0,t.useState)((0,c.parse)(e.content)),[h,x]=(0,t.useState)(null);return(0,t.useEffect)((()=>{o().then((e=>{x(e)}))}),[]),h?(0,d.jsx)("div",{className:"pattern-manager_editor",children:(0,d.jsxs)(r.BlockEditorProvider,{value:s,onInput:p,onChange:p,settings:h,children:[(0,d.jsxs)("div",{className:"pattern-editor_header",children:[(0,d.jsx)(l.Button,{onClick:n,icon:j,label:"Back"}),(0,d.jsx)(l.ToolbarItem,{as:m.EditorHistoryUndo,variant:"tertiary",size:"compact"}),(0,d.jsx)(l.ToolbarItem,{as:m.EditorHistoryRedo,variant:"tertiary",size:"compact"}),(0,d.jsx)("div",{style:{flexGrow:1}}),(0,d.jsx)(l.Button,{variant:"primary",onClick:()=>{!async function(e){a()({path:"/pattern-manager/v1/pattern",method:"PUT",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((e=>new i(e)))}({...e,content:(0,c.serialize)(s)})},children:"Save"})]}),(0,d.jsxs)("div",{className:"pattern-editor_body",children:[(0,d.jsx)("div",{className:"pattern-editor_list-view",children:(0,d.jsx)(r.__experimentalListView,{})}),(0,d.jsx)("div",{className:"pattern-editor_content",children:(0,d.jsx)(r.BlockCanvas,{height:"100%"})}),(0,d.jsx)("div",{className:"pattern-editor_sidebar",children:(0,d.jsx)("div",{className:"pattern-sidebar",children:(0,d.jsx)(l.TabPanel,{className:"pattern-tabs",activeClass:"is-active",tabs:[{name:"pattern",title:"Pattern"},{name:"block",title:"Block"},{name:"add",title:"Add"},{name:"bindings",title:"Bindings"},{name:"history",title:"History"}],children:t=>(0,d.jsxs)(d.Fragment,{children:["pattern"===t.name&&(0,d.jsx)(l.Panel,{children:(0,d.jsx)(w,{pattern:e})}),"block"===t.name&&(0,d.jsx)(l.Panel,{children:(0,d.jsx)(r.BlockInspector,{})}),"add"===t.name&&(0,d.jsx)(l.Panel,{children:(0,d.jsx)(r.__experimentalLibrary,{})})]})})})})]})]})}):(0,d.jsx)("div",{className:"pattern-manager_editor",children:"Loading..."})},v=()=>{const[e,n]=(0,t.useState)(null);return(0,d.jsx)("div",{className:"pattern-manager_container",children:e?(0,d.jsx)(u,{pattern:e,onClose:()=>n(null)}):(0,d.jsx)(h,{onPatternClick:n})})};function g(){return(0,d.jsx)(v,{})}window.addEventListener("load",(function(){const e=document.getElementById("pattern-manager-app");(0,t.createRoot)(e).render((0,d.jsx)(g,{}))}),!1)})();