(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var s in n)e.o(n,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:n[s]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.element,n=window.wp.i18n,s=window.wp.apiFetch;var r=e.n(s);const a=class{title="";content="";source="";slug="";synced=!1;constructor(e){this.title=e.title||"",this.content=e.content||"",this.source=e.source||"",this.name=e.name,this.synced=e.synced||!1}},i=window.wp.blockEditor,c=window.wp.blocks,o=window.wp.components,l=window.ReactJSXRuntime,d=({pattern:e,onClick:t})=>{const{title:n,content:s}=e,r=(0,c.parse)(s);return(0,l.jsxs)(o.Composite,{onClick:()=>{t&&t(e)},children:[(0,l.jsx)("p",{children:n}),(0,l.jsx)(i.BlockPreview,{blocks:r,viewportWidth:400,minHeight:200})]})},p=({onPatternClick:e})=>{const[s,i]=(0,t.useState)([]),[c,o]=(0,t.useState)(!0),[p,h]=(0,t.useState)(null);return(0,t.useEffect)((()=>{(async function(){return r()({path:"/pattern-manager/v1/patterns",method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.map((e=>new a(e)))))})().then((e=>{i(e),o(!1)})).catch((e=>{h(e.message||"Something went wrong."),o(!1)}))}),[]),(0,l.jsxs)("div",{className:"pattern-manager_preview-grid",children:[c&&(0,l.jsx)("p",{children:(0,n.__)("Loading patterns...","pattern-manager")}),p&&(0,l.jsx)("p",{style:{color:"red"},children:p}),s.map(((t,n)=>(0,l.jsx)("div",{className:"pattern-manager_preview-grid-item",children:(0,l.jsx)(d,{onClick:e,pattern:t})},n)))]})},h=({pattern:e})=>{const n=e=>{console.log("Block selected:",e)},s=(0,t.useRef)();return(0,l.jsx)("div",{className:"pattern-sidebar",children:(0,l.jsx)(o.TabPanel,{className:"pattern-tabs",activeClass:"is-active",tabs:[{name:"pattern",title:"Pattern"},{name:"block",title:"Block"},{name:"list",title:"List View"},{name:"add",title:"Add Block"}],children:e=>(0,l.jsxs)(l.Fragment,{children:["pattern"===e.name&&(0,l.jsx)(o.Panel,{children:(0,l.jsx)("p",{children:"Pattern Details"})}),"block"===e.name&&(0,l.jsx)(o.Panel,{children:(0,l.jsx)(i.BlockInspector,{})}),"list"===e.name&&(0,l.jsxs)(o.Panel,{children:[(0,l.jsx)("p",{children:"List View"}),(0,l.jsx)(i.__experimentalListView,{})]}),"add"===e.name&&(0,l.jsx)(o.Panel,{children:(0,l.jsx)(i.__experimentalLibrary,{showMostUsedBlocks:!0,ref:s,onSelect:n})})]})})})},m=({pattern:e})=>{const[n,s]=(0,t.useState)((0,c.parse)(e.content));return(0,l.jsx)("div",{className:"pattern-manager_editor",children:(0,l.jsxs)(i.BlockEditorProvider,{value:n,onInput:s,onChange:s,settings:{hasFixedToolbar:!0},children:[(0,l.jsx)("div",{className:"pattern-editor_header",children:"Editor"}),(0,l.jsxs)("div",{className:"pattern-editor_body",children:[(0,l.jsx)("div",{className:"pattern-editor_content",children:(0,l.jsx)(i.WritingFlow,{children:(0,l.jsx)(i.ObserveTyping,{children:(0,l.jsx)(i.BlockList,{})})})}),(0,l.jsx)("div",{className:"pattern-editor_sidebar",children:(0,l.jsx)(h,{})})]})]})})},j=()=>{const[e,n]=(0,t.useState)(null);return(0,l.jsx)("div",{className:"pattern-manager_container",children:e?(0,l.jsx)(m,{pattern:e}):(0,l.jsx)(p,{onPatternClick:n})})};function x(){return(0,l.jsx)(j,{})}window.addEventListener("load",(function(){const e=document.getElementById("pattern-manager-app");(0,t.createRoot)(e).render((0,l.jsx)(x,{}))}),!1)})();