(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.plugins,n=window.wp.editor,r=window.wp.components,a=window.wp.i18n,s=window.wp.primitives,i=window.ReactJSXRuntime,l=(0,i.jsx)(s.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,i.jsx)(s.Path,{d:"M14.103 7.128l2.26-2.26a4 4 0 00-5.207 4.804L5.828 15a2 2 0 102.828 2.828l5.329-5.328a4 4 0 004.804-5.208l-2.261 2.26-1.912-.512-.513-1.912zm-7.214 9.64a.5.5 0 11.707-.707.5.5 0 01-.707.707z"})}),o=(0,i.jsx)(s.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,i.jsx)(s.Path,{d:"M20.8 10.7l-4.3-4.3-1.1 1.1 4.3 4.3c.1.1.1.3 0 .4l-4.3 4.3 1.1 1.1 4.3-4.3c.7-.8.7-1.9 0-2.6zM4.2 11.8l4.3-4.3-1-1-4.3 4.3c-.7.7-.7 1.8 0 2.5l4.3 4.3 1.1-1.1-4.3-4.3c-.2-.1-.2-.3-.1-.4z"})}),c=window.wp.element,d=window.wp.blockEditor,p=window.wp.blockSerializationDefaultParser,m=window.wp.apiFetch;var w=e.n(m);const h=class{title="";content="";source="";slug="";synced=!1;constructor(e){this.title=e.title||"",this.content=e.content||"",this.source=e.source||"",this.name=e.name,this.synced=e.synced||!1}},x=window.wp.blocks,g=({pattern:e,onClick:t})=>{const{title:n,content:a}=e,s=(0,x.parse)(a);return(0,i.jsxs)(r.Composite,{onClick:()=>{t&&t(e)},children:[(0,i.jsx)("p",{children:n}),(0,i.jsx)(d.BlockPreview,{blocks:s,viewportWidth:400,minHeight:200})]})},j=({onPatternClick:e})=>{const[t,n]=(0,c.useState)([]),[r,s]=(0,c.useState)(!0),[l,o]=(0,c.useState)(null);return(0,c.useEffect)((()=>{(async function(){return w()({path:"/pattern-manager/v1/patterns",method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.map((e=>new h(e)))))})().then((e=>{n(e),s(!1)})).catch((e=>{o(e.message||"Something went wrong."),s(!1)}))}),[]),(0,i.jsxs)("div",{className:"pattern-manager_preview-grid",children:[r&&(0,i.jsx)("p",{children:(0,a.__)("Loading patterns...","pattern-manager")}),l&&(0,i.jsx)("p",{style:{color:"red"},children:l}),t.map(((t,n)=>(0,i.jsx)("div",{className:"pattern-manager_preview-grid-item",children:(0,i.jsx)(g,{onClick:e,pattern:t})},n)))]})},u=({pattern:e})=>{const t=e=>{console.log("Block selected:",e)},n=(0,c.useRef)();return(0,i.jsx)("div",{className:"pattern-sidebar",children:(0,i.jsx)(r.TabPanel,{className:"pattern-tabs",activeClass:"is-active",tabs:[{name:"pattern",title:"Pattern"},{name:"block",title:"Block"},{name:"list",title:"List View"},{name:"add",title:"Add Block"}],children:e=>(0,i.jsxs)(i.Fragment,{children:["pattern"===e.name&&(0,i.jsx)(r.Panel,{children:(0,i.jsx)("p",{children:"Pattern Details"})}),"block"===e.name&&(0,i.jsx)(r.Panel,{children:(0,i.jsx)(d.BlockInspector,{})}),"list"===e.name&&(0,i.jsxs)(r.Panel,{children:[(0,i.jsx)("p",{children:"List View"}),(0,i.jsx)(d.__experimentalListView,{})]}),"add"===e.name&&(0,i.jsx)(r.Panel,{children:(0,i.jsx)(d.__experimentalLibrary,{showMostUsedBlocks:!0,ref:n,onSelect:t})})]})})})},v=({pattern:e})=>{const[t,n]=(0,c.useState)((0,x.parse)(e.content));return(0,i.jsx)("div",{className:"pattern-manager_editor",children:(0,i.jsxs)(d.BlockEditorProvider,{value:t,onInput:n,onChange:n,settings:{hasFixedToolbar:!0},children:[(0,i.jsx)("div",{className:"pattern-editor_header",children:"Editor"}),(0,i.jsxs)("div",{className:"pattern-editor_body",children:[(0,i.jsx)("div",{className:"pattern-editor_content",children:(0,i.jsx)(d.WritingFlow,{children:(0,i.jsx)(d.ObserveTyping,{children:(0,i.jsx)(d.BlockList,{})})})}),(0,i.jsx)("div",{className:"pattern-editor_sidebar",children:(0,i.jsx)(u,{})})]})]})})},b=()=>{const[e,t]=(0,c.useState)(null);return(0,i.jsx)("div",{className:"pattern-manager_container",children:e?(0,i.jsx)(v,{pattern:e}):(0,i.jsx)(j,{onPatternClick:t})})},k=({onRequestClose:e})=>(0,i.jsx)(r.Modal,{title:(0,a._x)("Pattern Manager","UI String","pattern-manager"),className:"pattern-manager_modal",onRequestClose:e,isFullScreen:!0,children:(0,i.jsx)(b,{})});(0,t.registerPlugin)("pattern-manager",{render:function(){const[e,t]=(0,c.useState)(!1),s=(0,p.parse)("\x3c!-- wp:paragraph --\x3e<p>Hello from BlockPreview!</p>\x3c!-- /wp:paragraph --\x3e");return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.PluginSidebarMoreMenuItem,{target:"pattern-manager-sidebar",icon:l,children:(0,a._x)("Pattern Manager","UI String","pattern-manager")}),(0,i.jsxs)(n.PluginSidebar,{name:"pattern-manager-sidebar",icon:l,title:(0,a._x)("Pattern Manager","UI String","pattern-manager"),children:[(0,i.jsx)(r.Button,{icon:o,onClick:()=>t(!0),children:(0,a.__)("View Custom Styles","create-block-theme")}),(0,i.jsx)(d.BlockPreview,{blocks:s,viewportWidth:300,minHeight:300})]}),e&&(0,i.jsx)(k,{onRequestClose:()=>t(!1)})]})}})})();