(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.plugins,n=window.wp.editor,r=window.wp.components,a=window.wp.i18n,i=window.wp.primitives,s=window.ReactJSXRuntime,o=(0,s.jsx)(i.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,s.jsx)(i.Path,{d:"M14.103 7.128l2.26-2.26a4 4 0 00-5.207 4.804L5.828 15a2 2 0 102.828 2.828l5.329-5.328a4 4 0 004.804-5.208l-2.261 2.26-1.912-.512-.513-1.912zm-7.214 9.64a.5.5 0 11.707-.707.5.5 0 01-.707.707z"})}),c=(0,s.jsx)(i.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)(i.Path,{d:"M20.8 10.7l-4.3-4.3-1.1 1.1 4.3 4.3c.1.1.1.3 0 .4l-4.3 4.3 1.1 1.1 4.3-4.3c.7-.8.7-1.9 0-2.6zM4.2 11.8l4.3-4.3-1-1-4.3 4.3c-.7.7-.7 1.8 0 2.5l4.3 4.3 1.1-1.1-4.3-4.3c-.2-.1-.2-.3-.1-.4z"})}),l=window.wp.element,p=window.wp.blockEditor,w=window.wp.blockSerializationDefaultParser,d=window.wp.apiFetch;var g=e.n(d);const h=class{title="";content="";source="";slug="";synced=!1;constructor(e){this.title=e.title||"",this.content=e.content||"",this.blocks=(0,w.parse)(this.content),this.source=e.source||"",this.name=e.name,this.synced=e.synced||!1}},m=window.wp.blocks,u=({pattern:e})=>{const{title:t,content:n}=e,a=(0,m.parse)(n);return(0,s.jsxs)(r.Composite,{onClick:()=>{console.log("Pattern clicked:",e)},children:[(0,s.jsx)("p",{children:t}),(0,s.jsx)(p.BlockPreview,{blocks:a,viewportWidth:400,minHeight:200})]})},x=()=>{const[e,t]=(0,l.useState)([]),[n,r]=(0,l.useState)(!0),[i,o]=(0,l.useState)(null);return(0,l.useEffect)((()=>{(async function(){return g()({path:"/pattern-manager/v1/patterns",method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.map((e=>new h(e)))))})().then((e=>{t(e),r(!1)})).catch((e=>{o(e.message||"Something went wrong."),r(!1)}))}),[]),(0,s.jsxs)("div",{className:"pattern-manager_container",children:[n&&(0,s.jsx)("p",{children:(0,a.__)("Loading patterns...","pattern-manager")}),i&&(0,s.jsx)("p",{style:{color:"red"},children:i}),(0,s.jsx)("div",{className:"pattern-manager_preview-grid",children:e.map(((e,t)=>(0,s.jsx)("div",{className:"pattern-manager_preview-grid-item",children:(0,s.jsx)(u,{pattern:e})},t)))})]})},j=({onRequestClose:e})=>(0,s.jsx)(r.Modal,{title:(0,a._x)("Pattern Manager","UI String","pattern-manager"),onRequestClose:e,isFullScreen:!0,children:(0,s.jsx)(x,{})});(0,t.registerPlugin)("pattern-manager",{render:function(){const[e,t]=(0,l.useState)(!1),i=(0,w.parse)("\x3c!-- wp:paragraph --\x3e<p>Hello from BlockPreview!</p>\x3c!-- /wp:paragraph --\x3e");return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.PluginSidebarMoreMenuItem,{target:"pattern-manager-sidebar",icon:o,children:(0,a._x)("Pattern Manager","UI String","pattern-manager")}),(0,s.jsxs)(n.PluginSidebar,{name:"pattern-manager-sidebar",icon:o,title:(0,a._x)("Pattern Manager","UI String","pattern-manager"),children:[(0,s.jsx)(r.Button,{icon:c,onClick:()=>t(!0),children:(0,a.__)("View Custom Styles","create-block-theme")}),(0,s.jsx)(p.BlockPreview,{blocks:i,viewportWidth:300,minHeight:300})]}),e&&(0,s.jsx)(j,{onRequestClose:()=>t(!1)})]})}})})();