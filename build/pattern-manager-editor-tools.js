(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var a in n)e.o(n,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:n[a]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.plugins,n=window.wp.editor,a=window.wp.components,r=window.wp.i18n,s=window.wp.primitives,i=window.ReactJSXRuntime,l=(0,i.jsx)(s.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,i.jsx)(s.Path,{d:"M14.103 7.128l2.26-2.26a4 4 0 00-5.207 4.804L5.828 15a2 2 0 102.828 2.828l5.329-5.328a4 4 0 004.804-5.208l-2.261 2.26-1.912-.512-.513-1.912zm-7.214 9.64a.5.5 0 11.707-.707.5.5 0 01-.707.707z"})}),o=(0,i.jsx)(s.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,i.jsx)(s.Path,{d:"M20.8 10.7l-4.3-4.3-1.1 1.1 4.3 4.3c.1.1.1.3 0 .4l-4.3 4.3 1.1 1.1 4.3-4.3c.7-.8.7-1.9 0-2.6zM4.2 11.8l4.3-4.3-1-1-4.3 4.3c-.7.7-.7 1.8 0 2.5l4.3 4.3 1.1-1.1-4.3-4.3c-.2-.1-.2-.3-.1-.4z"})}),c=window.wp.element,d=window.wp.blockEditor,p=window.wp.blockSerializationDefaultParser,h=window.wp.apiFetch;var m=e.n(h);const w=class{title="";content="";source="";slug="";synced=!1;constructor(e){this.title=e.title||"",this.content=e.content||"",this.source=e.source||"",this.name=e.name,this.synced=e.synced||!1}};async function x(){return m()({path:"/pattern-manager/v1/global-styles"}).then((e=>e)).catch((e=>{console.error("Error fetching global styles:",e)}))}const g=window.wp.blocks,u=({pattern:e,onClick:t})=>{const{title:n,content:r}=e,s=(0,g.parse)(r);return(0,i.jsxs)(a.Composite,{onClick:()=>{t&&t(e)},children:[(0,i.jsx)("p",{children:n}),(0,i.jsx)(d.BlockPreview,{blocks:s,viewportWidth:500,minHeight:150})]})},j=({onPatternClick:e})=>{const[t,n]=(0,c.useState)([]),[a,s]=(0,c.useState)({}),[l,o]=(0,c.useState)(!0),[p,h]=(0,c.useState)(null);return(0,c.useEffect)((()=>{(async function(){return m()({path:"/pattern-manager/v1/patterns",method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.map((e=>new w(e)))))})().then((e=>{n(e),o(!1)})).catch((e=>{h(e.message||"Something went wrong."),o(!1)})),x().then((e=>{s(e)}))}),[]),(0,i.jsx)(d.BlockEditorProvider,{settings:{...a,isPreviewMode:!0,focusMode:!1},children:(0,i.jsxs)("div",{className:"pattern-manager_preview-grid",children:[l&&(0,i.jsx)("p",{children:(0,r.__)("Loading patterns...","pattern-manager")}),p&&(0,i.jsx)("p",{style:{color:"red"},children:p}),t.map(((t,n)=>(0,i.jsx)("div",{className:"pattern-manager_preview-grid-item",children:(0,i.jsx)(u,{onClick:e,pattern:t})},n)))]})})},v=()=>(0,i.jsx)("div",{className:"pattern-sidebar",children:(0,i.jsx)(a.TabPanel,{className:"pattern-tabs",activeClass:"is-active",tabs:[{name:"pattern",title:"Pattern"},{name:"block",title:"Block"},{name:"add",title:"Add"}],children:e=>(0,i.jsxs)(i.Fragment,{children:["pattern"===e.name&&(0,i.jsx)(a.Panel,{children:(0,i.jsx)("p",{children:"Pattern Details"})}),"block"===e.name&&(0,i.jsx)(a.Panel,{children:(0,i.jsx)(d.BlockInspector,{})}),"add"===e.name&&(0,i.jsx)(a.Panel,{children:(0,i.jsx)(d.__experimentalLibrary,{})})]})})}),P=({pattern:e})=>{const[t,n]=(0,c.useState)((0,g.parse)(e.content)),[a,r]=(0,c.useState)(null);return(0,c.useEffect)((()=>{x().then((e=>{r(e)}))}),[]),a?(0,i.jsx)("div",{className:"pattern-manager_editor",children:(0,i.jsxs)(d.BlockEditorProvider,{value:t,onInput:n,onChange:n,settings:a,children:[(0,i.jsx)("div",{className:"pattern-editor_header",children:"Editor"}),(0,i.jsxs)("div",{className:"pattern-editor_body",children:[(0,i.jsx)("div",{className:"pattern-editor_list-view",children:(0,i.jsx)(d.__experimentalListView,{})}),(0,i.jsx)("div",{className:"pattern-editor_content",children:(0,i.jsx)(d.BlockCanvas,{height:"100%"})}),(0,i.jsx)("div",{className:"pattern-editor_sidebar",children:(0,i.jsx)(v,{})})]})]})}):(0,i.jsx)("div",{className:"pattern-manager_editor",children:"Loading..."})},b=()=>{const[e,t]=(0,c.useState)(null);return(0,i.jsx)("div",{className:"pattern-manager_container",children:e?(0,i.jsx)(P,{pattern:e}):(0,i.jsx)(j,{onPatternClick:t})})},_=({onRequestClose:e})=>(0,i.jsx)(a.Modal,{title:(0,r._x)("Pattern Manager","UI String","pattern-manager"),className:"pattern-manager_modal",onRequestClose:e,isFullScreen:!0,children:(0,i.jsx)(b,{})});(0,t.registerPlugin)("pattern-manager",{render:function(){const[e,t]=(0,c.useState)(!1),s=(0,p.parse)("\x3c!-- wp:paragraph --\x3e<p>Hello from BlockPreview!</p>\x3c!-- /wp:paragraph --\x3e");return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.PluginSidebarMoreMenuItem,{target:"pattern-manager-sidebar",icon:l,children:(0,r._x)("Pattern Manager","UI String","pattern-manager")}),(0,i.jsxs)(n.PluginSidebar,{name:"pattern-manager-sidebar",icon:l,title:(0,r._x)("Pattern Manager","UI String","pattern-manager"),children:[(0,i.jsx)(a.Button,{icon:o,onClick:()=>t(!0),children:(0,r.__)("View Custom Styles","create-block-theme")}),(0,i.jsx)(d.BlockPreview,{blocks:s,viewportWidth:300,minHeight:300})]}),e&&(0,i.jsx)(_,{onRequestClose:()=>t(!1)})]})}})})();